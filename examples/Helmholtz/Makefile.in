all: main

CC=@STRUMPACK_C_COMPILER@
FC=@STRUMPACK_Fortran_COMPILER@
CXX=@STRUMPACK_CXX_COMPILER@
CPPFLAGS=@STRUMPACK_ALL_INCLUDE_DIRS@

CFLAGS=@STRUMPACK_ALL_C_FLAGS@
CXXFLAGS=@STRUMPACK_ALL_CXX_FLAGS@
LIBS=-L@CMAKE_INSTALL_PREFIX@/lib/ -lstrumpack @STRUMPACK_ALL_LIBS@
LDFLAGS=@OpenMP_CXX_FLAGS@ @CMAKE_EXE_LINKER_FLAGS@

main: main.cpp genmatrix3D_core.f
	$(CXX) $(CPPFLAGS) $(CFLAGS) -c main.cpp -o main.o
	$(FC) $(CPPFLAGS) $(CFLAGS) -c genmatrix3D_core.f -o genmatrix3D_core.o
	$(CXX) $(LDFLAGS) main.o genmatrix3D_core.o -o $@ $(LIBS)
	$(RM) main.o genmatrix3D_core.o

clean:
	rm -f *~ *o main


